<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="jquery.min.js"></script>
	<script src="knockout.min.js"></script>
	<script src="komapping.min.js"></script>
	<title>Атомная станция</title>
</head>
<body>
	<section class="control">
		<h2>Панель управления</h2>
		<div>
			<label>
				Общая мощность:
				<input type="number" min="0" max="4000" step="1" name="power-common"
					data-bind="value: common.power, enable: !common.fullManual()">
			</label>
			<br>
			<label>
				0<input type="range" min="0" max="4000" step="1" name="power-common"
					data-bind="value: common.power, enable: !common.fullManual(), event: {change: $root.updatePowers}">4000
			</label>
		</div>
	
		<br>
		<br>
		<!-- ko if: console.log($root) -->
		<!-- /ko -->


		<!-- ko foreach: $root.reactors -->
		<div>
			<label>
				<input type="checkbox" data-bind="checked: $data.auto" title="Автоматический режим">
				<span data-bind="text: 'Реактор #' + ($index() + 1) +':'"></span>
				<input type="number" min="0" max="1000" step="1"
					data-bind="value: $data.power, name: 'power-reactor-' + $index(),
					enable: !$data.auto(), event: {change: $root.updatePowers.bind($root)}">
			</label>
			<br>
			<label>
				0<input type="range" min="0" max="1000" step="1"
					data-bind="value: $data.power, name: 'power-reactor-' + $index(),
					enable: !$data.auto(), event: {change: $root.updatePowers.bind($root)}">1000
			</label>
		</div>
		<!-- /ko -->
	</section>
	<section class="info">
		<h2>Информация</h2>
		<div>
			<h3>Общая информация</h3>
			<label>
				Мощность:
				<span data-bind="text: common.power() + ' МВт'"></span>
			</label>
			<br>
			<label>
				Среднее давление:
				<span data-bind="text: common.pressure().toFixed(2) + ' атм'"></span>
			</label>
			<br>
			<label>
				Средняя температура:
				<span data-bind="text: common.temperature().toFixed(2) + '°C'"></span>
			</label>
		</div>
		<!-- ko foreach: $root.reactors -->
		<div>
			<h3 data-bind="text: 'Реактор #' + ($index() + 1)"></h3>
			<label>
				Мощность:
				<span data-bind="text: $data.power() + ' МВт'"></span>
			</label>
			<br>
			<label>
				Среднее давление:
				<span data-bind="text: $data.pressure().toFixed(2) + ' атм'"></span>
			</label>
			<br>
			<label>
				Средняя температура:
				<span data-bind="text: $data.temperature().toFixed(2) + '°C'"></span>
			</label>
		</div>
		<!-- /ko -->
	</section>
	<section class="plot">
		<h2>График</h2>
	</section>
	<script src="script.js"></script>
</body>
</html>